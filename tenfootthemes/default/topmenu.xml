<?xml version="1.0" encoding="UTF-8" ?>
<torctheme>
    <window name="topmenu" inherits="/basewindow">
        <messenger name="messages" position="100,100,600,880">
            <group name="group" position="0,0,600,880">
                <layout type="vertical" alignment="top"/>
            </group>
            <widget name="template" position="0,0,600,100" template="true">
                <shape name="bg" position="0,0,600,100">
                    <path>
                        <pen color="880000FF" width="3" penstyle="SolidLine"/>
                        <brush color="66666699" brushstyle="SolidPattern"/>
                        <addroundedrect rect="2,2,594,94" xradius="11" yradius="11"/>
                    </path>
                </shape>
                <effect alpha="0.0" centre="middle"/>
                <animation name="Activated">
                    <element property="alpha" endvalue="1.0"/>
                </animation>
                <animation name="Deactivated">
                    <element duration="100" property="alpha" endvalue="0.0"/>
                    <element duration="500" property="verticalzoom" endvalue="0.0" easingcurve="outquad"/>
                </animation>
                <text name="header" position="0,0,600,100">
                    <font name="main" alignment="left"/>
                </text>
            </widget>
        </messenger>
        <group name="menu" position="0,700,1920,100">
            <layout type="horizontal" selectrange="100,0,1720,100"/>
            <scroll speed="1000" easingcurve="outquad"/>
            <button name="media" inherits="/templates_button">
                <message>Media</message>
                <connect signal="Released" slot="SetAsRootWidget" receiver="/media"/>
            </button>
            <button name="settings" inherits="/templates_button">
                <message>Settings</message>
                <connect signal="Released" slot="SetAsRootWidget" receiver="/settings"/>
            </button>
        </group>
    </window>
    <window name="media" inherits="/basewindow">
        <media name="media" position="0,0,1920,1080">
            <scriptfunction name="Finalise">
                SetProperty(TorcPlayer.Brightness, media_media.GetProperty(TorcPlayer.Brightness));
                SetProperty(TorcPlayer.Contrast, media_media.GetProperty(TorcPlayer.Contrast));
                SetProperty(TorcPlayer.Saturation, media_media.GetProperty(TorcPlayer.Saturation));
                SetProperty(TorcPlayer.Hue, media_media.GetProperty(TorcPlayer.Hue));
                media_media_colourcontrols.Hide();
            </scriptfunction>
            <scriptfunction name="SetProperty" arguments="Property,Value">
                var actioned = false;
                if (Property == TorcPlayer.Brightness)
                {
                    media_media_colourcontrols_brightness.SetText(Value);
                    media_media_colourcontrols_brightness_switch.SetRotation((Value - 50) * 1.8);
                    actioned = true;
                }
                else if (Property == TorcPlayer.Contrast)
                {
                    media_media_colourcontrols_contrast.SetText(Value);
                    media_media_colourcontrols_contrast_switch.SetRotation((Value - 50) * 1.8);
                    actioned = true;
                }
                else if (Property == TorcPlayer.Saturation)
                {
                    media_media_colourcontrols_saturation.SetText(Value);
                    media_media_colourcontrols_saturation_switch.SetRotation((Value - 50) * 1.8);
                    actioned = true;
                }
                else if (Property == TorcPlayer.Hue)
                {
                    media_media_colourcontrols_hue.SetText(Value);
                    media_media_colourcontrols_hue_switch.SetRotation((Value - 50) * 1.8);
                    actioned = true;
                }
                if (actioned)
                {
                    media_media_colourcontrols_Deactivated.Stop();
                    media_media_colourcontrols.Activate();
                }
            </scriptfunction>
            <scriptfunction name="PropertyAvailable" arguments="Property">
                if (Property == TorcPlayer.Brightness)
                    media_media_colourcontrols_brightness.Show();
                else if (Property == TorcPlayer.Contrast)
                    media_media_colourcontrols_contrast.Show();
                else if (Property == TorcPlayer.Saturation)
                    media_media_colourcontrols_saturation.Show();
                else if (Property == TorcPlayer.Hue)
                    media_media_colourcontrols_hue.Show();
            </scriptfunction>
            <scriptfunction name="PropertyUnavailable" arguments="Property">
                if (Property == TorcPlayer.Brightness)
                    media_media_colourcontrols_brightness.Hide();
                else if (Property == TorcPlayer.Contrast)
                    media_media_colourcontrols_contrast.Hide();
                else if (Property == TorcPlayer.Saturation)
                    media_media_colourcontrols_saturation.Hide();
                else if (Property == TorcPlayer.Hue)
                    media_media_colourcontrols_hue.Hide();
            </scriptfunction>
            <connect signal="Finalised" slot="Finalise"/>
            <connect signal="PropertyChanged(int,QVariant)" slot="SetProperty"/>
            <connect signal="PropertyAvailable(int)"        slot="PropertyAvailable"/>
            <connect signal="PropertyUnavailable(int)"      slot="PropertyUnavailable"/>
            <group name="colourcontrols" position="1020,780,800,200">
                <effect alpha="0" verticalzoom="0.5" centre="bottom"/>
                <animation name="Activated">
                    <connect signal="Finished" receiver=".." slot="Deactivate"/>
                    <group type="sequential">
                        <group type="parallel">
                            <element duration="200" property="alpha" endvalue="1"/>
                            <element duration="200" property="verticalzoom" endvalue="1"/>
                        </group>
                        <pause   duration="5000"/>
                    </group>
                </animation>
                <animation name="Deactivated">
                    <connect signal="Finished" receiver=".." slot="Hide"/>
                    <element duration="400" property="alpha" endvalue="0"/>
                    <element duration="400" property="verticalzoom" endvalue="0.5"/>
                </animation>
                <layout type="horizontal" alignment="left"/>
                <text name="knob" position="0,0,200,200" inherits="/templates_button_text" template="1">
                    <shape name="switch" position="0,0,200,200">
                        <path>
                            <pen color="DDDDDDFF" width="3"/>
                            <addellipse rect="30,30,140,140"/>
                            <moveto point="100,30"/>
                            <lineto point="100,15"/>
                        </path>
                        <fixedblur radius="1"/>
                    </shape>
                    <shape name="surround" position="0,0,200,200">
                        <path>
                            <pen color="FF0000FF" width="3"/>
                            <moveto point="15,100"/>
                            <lineto point="26,100"/>
                            <arcto  rect="26,26,148,148" startangle="180" sweeplength="180"/>
                            <lineto point="185,100"/>
                        </path>
                    </shape>
                </text>
                <text name="brightness" inherits="../knob" />
                <text name="contrast"   inherits="../knob" />
                <text name="saturation" inherits="../knob" />
                <text name="hue"        inherits="../knob" />
            </group>
        </media>
        <button name="top_1" inherits="/templates_button">
            <message>Close</message>
            <connect signal="Released" slot="SetAsRootWidget" receiver="/topmenu"/>
        </button>
    </window>
    <window name="settings" inherits="/basewindow">
        <connect signal="Shown"  slot="CreateSettings"  receiver="menu"/>
        <connect signal="Hidden" slot="DestroySettings" receiver="menu"/>
        <setting name="menu" position="0,0,400,1080">
            <layout type="vertical" fixedheight="100" spacingx="5"/>
            <group name="GROUPITEM" position="0,0,800,100" template="1">
                <layout type="horizontal" alignment="left"/>
                <connect signal="GroupSelected" slot="Activate" receiver="SETTINGITEM"/>
                <connect signal="GroupDeselected" slot="Deactivate" receiver="SETTINGITEM"/>
                <button name="SETTINGNAME" inherits="/templates_button"/>
                <group name="SETTINGITEM" position="400,0,1520,1080">
                    <layout type="vertical" spacingx="5" wrapselection="1"/>
                    <state visible="false"/>
                    <effect detached="true" alpha="0"/>
                    <shape name="bg" position="0,0,1520,1080">
                        <effect decoration="1"/>
                        <path>
                            <pen color="FFFFFFFF" width="5"/>
                            <addrect rect="0,0,1520,1080" xradius="5" yradius="5"/>
                        </path>
                    </shape>
                    <animation name="Activated">
                        <element property="alpha" endvalue="1.0"/>
                    </animation>
                    <animation name="Deactivated">
                        <element property="alpha" duration="0" endvalue="0.0"/>
                    </animation>
                    <button name="CHECKBOX" inherits="/templates_button" template="1">
                        <checkbox/>
                        <effect alpha="0.5" centre="left"/>
                        <connect signal="Pushed"   slot="Show" receiver="toggle"/>
                        <connect signal="Released" slot="Hide" receiver="toggle"/>
                        <animation name="Activated">
                            <element property="alpha" endvalue="1.0" duration="100"/>
                        </animation>
                        <animation name="Deactivated">
                            <element property="alpha" endvalue="0.5" duration="100"/>
                        </animation>
                        <shape name="toggle" position="0,0,20,100">
                            <state visible="false"/>
                            <path>
                                <brush color="FF0000FF" brushstyle="SolidPattern"/>
                                <addroundedrect rect="2,2,94,94" xradius="11" yradius="11"/>
                            </path>
                        </shape>
                        <text name="DESCRIPTION" position="300,0,1220,1080">
                            <font name="main" alignment="left"/>
                        </text>
                    </button>
                </group>
            </group>
            <button name="closeme" inherits="/templates_button">
                <message>Close</message>
                <connect signal="Released" slot="SetAsRootWidget" receiver="/topmenu"/>
            </button>
        </setting>
    </window>
</torctheme>
